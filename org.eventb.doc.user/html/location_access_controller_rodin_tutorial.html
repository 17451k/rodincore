<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Content generated by Mediawiki and mw2html -->
<html dir="ltr" lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
				<meta content="Location Access Controller (Rodin Tutorial),Customizing a perspective suitable for RODIN (Rodin Tutorial),Index (Rodin Tutorial),Mathematical proofs (Rodin Tutorial)" name="keywords" />
		<link href="" rel="shortcut icon" />
		<link href="" rel="search" title="Event-B (English)" type="application/opensearchdescription+xml" />
<link href="" rel="alternate" title="Event-B RSS Feed" type="application/rss+xml" />
<link href="" rel="alternate" title="Event-B Atom Feed" type="application/atom+xml" />
		<title>Location Access Controller (Rodin Tutorial) - Event-B</title>
		<style media="screen, projection" type="text/css">/*<![CDATA[*/
			@import "shared.css";
			@import "main.css";
		/*]]>*/</style>
		<link href="commonprint.css" media="print" rel="stylesheet" type="text/css" />
		<!--[if lt IE 5.5000]><style type="text/css">@import "ie50fixes.css";</style><![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "ie55fixes.css";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "ie60fixes.css";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "ie70fixes.css";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="iefixes.js_116"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		
		<script type="text/javascript">/*<![CDATA[*/
var skin = "monobook";
var stylepath = "/skins";
var wgArticlePath = "/index.php/$1";
var wgScriptPath = "";
var wgScript = "/index.php";
var wgServer = "http://wiki.event-b.org";
var wgCanonicalNamespace = "";
var wgCanonicalSpecialPageName = false;
var wgNamespaceNumber = 0;
var wgPageName = "Location_Access_Controller_(Rodin_Tutorial)";
var wgTitle = "Location Access Controller (Rodin Tutorial)";
var wgAction = "view";
var wgRestrictionEdit = [];
var wgRestrictionMove = [];
var wgArticleId = "81";
var wgIsArticle = true;
var wgUserName = null;
var wgUserGroups = null;
var wgUserLanguage = "en";
var wgContentLanguage = "en";
var wgBreakFrames = false;
var wgCurRevisionId = "948";
var wgVersion = "1.12.0";
var wgEnableAPI = true;
var wgEnableWriteAPI = false;
/*]]>*/</script>
                
		<script src="wikibits.js_116" type="text/javascript"><!-- wikibits js --></script>
		<!-- Head Scripts -->
		<script src="ajax.js_116" type="text/javascript"></script>
		<script src="" type="text/javascript"><!-- site js --></script>
		<style type="text/css">/*<![CDATA[*/
@import "";
@import "";
@import "";
/*]]>*/</style>
	</head>
<body class="mediawiki ns-0 ltr page-Location_Access_Controller_Rodin_Tutorial">
	<div id="globalWrapperHacked">
		<div id="column-content">
	<div id="content">
		<a id="top" name="top"></a>
				<h1 class="firstHeading">Location Access Controller (Rodin Tutorial)</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From Event-B</h3>
			<!-- ('div', {'id': 'contentSub'}) ('/div', {}) -->
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content -->
			<div class="warning" style="color:red;"><b>Dear reader, some formulas and templates are not yet rendered well, but the problem is being worked out...</b></div>
<div class="navigation">
<p>{{ #if: <a href="customizing_a_perspective_suitable_for_rodin_rodin_tutorial.html" title="Customizing a perspective suitable for RODIN (Rodin Tutorial)">Customizing a perspective suitable for RODIN</a> | Previous:<a href="customizing_a_perspective_suitable_for_rodin_rodin_tutorial.html" title="Customizing a perspective suitable for RODIN (Rodin Tutorial)">Customizing a perspective suitable for RODIN</a> | }} {{ #if: <a href="mathematical_proofs_rodin_tutorial.html" title="Mathematical proofs (Rodin Tutorial)">Mathematical proofs</a> | Next:<a href="mathematical_proofs_rodin_tutorial.html" title="Mathematical proofs (Rodin Tutorial)">Mathematical proofs</a> | }} {{ #if: <a href="index_rodin_tutorial1.html" title="Index (Rodin Tutorial)">Index</a> | Up:<a href="index_rodin_tutorial1.html" title="Index (Rodin Tutorial)">Index</a> | }}
</p>
</div><div>
<p><br />
In this section, we will take a closer look at a few more complex proofs. For this, we will use the model of the Location Access Controller, which is saved in the <tt>doors.zip</tt> project archive. Explanations on the model can be found in the chapter entitled “Location Access Controller” of the Event-B book. Our task is to develop the proofs for deadlock freeness of the initial model and of the first refinement.
</p><p><br />
</p><p>Import <tt>doors.zip</tt>. Looking through it, you will see that everything already has been proved. This is true, however, RODIN does not do any deadlock freeness proof yet, so you will have to add them yourself.
</p>
<a name="Initial_Model"></a><h2><span class="editsection">[<a href="" title="Edit section: Initial Model">edit</a>]</span> <span class="mw-headline"> Initial Model </span></h2>
<p>First, let us look at the initial model, constisting of <tt>doors_ctx1</tt> and <tt>doors_0</tt>. There are two carrier sets in the model, one for people and one for locations. Then, there is a location called &lt;math&gt;outside&lt;/math&gt; and a relation &lt;math&gt;aut&lt;/math&gt; which reflects where people are allowed to go. Everyone is allowed to &lt;math&gt;outside&lt;/math&gt;. The model only has one event, which changes the location of a person. So, proof of deadlock freeness means proving, that someone can always change room.
</p>
<ol><li> Add a new theorem to <tt>doors_0</tt> called “DLF” and change the predicate so that it is the disjunction of all guards (since there is only one guard here, it would be &lt;math&gt;\exists p, l \cdot ( p \mapsto l \in aut \wedge sit(p) \neq l)&lt;/math&gt;.
</li><li> Save the machine. You will see that the autoprover fails to prove the theorem (<tt>DLF/THM</tt>). Let us analyze whether this is an inconsistency in the model. In order to succeed with the proof, we need a tuple &lt;math&gt;p \mapsto l&lt;/math&gt; that is in &lt;math&gt;aut&lt;/math&gt;, but not in &lt;math&gt;sit&lt;/math&gt;. Searching the hypotheses, we find AXM4 of <tt>doors_ctx1</tt>, which states that there is a room &lt;math&gt;l&lt;/math&gt;, where everyone is permitted to. So, for every person &lt;math&gt;p&lt;/math&gt; in &lt;math&gt;P&lt;/math&gt;, &lt;math&gt;p \mapsto l&lt;/math&gt; and &lt;math&gt;p \mapsto outside&lt;/math&gt; is in &lt;math&gt;aut&lt;/math&gt;. Since these are different, at least one of them cannot be in the function &lt;math&gt;sit&lt;/math&gt;. Now, all we would need to prove is that &lt;math&gt;P&lt;/math&gt; is nonempty. This holds, as carrier sets always are nonempty, but is a bit hard to derive. Add the hypothesis &lt;math&gt;P \neq \emptyset &lt;/math&gt; using the ah button. Then, click on the Auto Prover button (The button with a robot on it). Other provers do not work here. After successfully adding the hypothesis, we can conclude the proof as follows:
</li><li> Add AXM4 (the one with the existential quantifier) to the selected hypothesis. You see that it automatically is instantiated as &lt;math&gt;l&lt;/math&gt;. Next, click on the “&lt;math&gt;\neg &lt;/math&gt;” of &lt;math&gt;\neg \  P = \emptyset &lt;/math&gt; in the search hypothesis window. This creates a selected hypothesis &lt;math&gt;x \in P&lt;/math&gt;. We can now instantiate &lt;math&gt;p&lt;/math&gt; in the goal with &lt;math&gt;x&lt;/math&gt;.
</li><li> In order to instantiate &lt;math&gt;l&lt;/math&gt;, we need a case distinction. Type &lt;math&gt;sit(x) = l&lt;/math&gt; this into the proof control and click on Case Distinction (dc) to look at the two cases &lt;math&gt;sit(x) = l&lt;/math&gt; and &lt;math&gt;sit(x) \neq l&lt;/math&gt;. Before starting with the cases, the prover now wants you to prove that &lt;math&gt;x \in dom(sit)&lt;/math&gt;. This can be done with p0, as &lt;math&gt;sit&lt;/math&gt; is a total function. In the first case &lt;math&gt;x&lt;/math&gt; is situated in &lt;math&gt;l&lt;/math&gt;, so it cannot be in &lt;math&gt;outside&lt;/math&gt;. So, you can instantiate &lt;math&gt;l&lt;/math&gt; with &lt;math&gt;outside&lt;/math&gt;. In order to prove that &lt;math&gt;x&lt;/math&gt; is allowed to &lt;math&gt;outside&lt;/math&gt;, you will need to select the hypothesis &lt;math&gt;P \times {outside} \subseteq aut&lt;/math&gt;. Then you can finish this case with p0. If you look at the proof tree, you see that you now have reached the other branch of the case distinction. In this case, you can simply instantiate &lt;math&gt;l&lt;/math&gt; with &lt;math&gt;l&lt;/math&gt;, as &lt;math&gt;x&lt;/math&gt; is not situated there. Finally, click on p0 to finish the proof.
</li></ol>
<a name="First_Refinement"></a><h2><span class="editsection">[<a href="" title="Edit section: First Refinement">edit</a>]</span> <span class="mw-headline"> First Refinement </span></h2>
<p>Now we get to the a bit harder proof: The deadlock freeness proof for the first refinement. There is not much that has changed. The constant &lt;math&gt;com&lt;/math&gt; has been added in order to describe which rooms are connected. Additionally, we have a constant &lt;math&gt;exit&lt;/math&gt;, which will be explained later.
</p>
<ol><li> Open <tt>door_1</tt> and add a theorem called DLF stating &lt;math&gt;\exists q, m \cdot (q \mapsto m \in aut \wedge sit(q) \mapsto m \in com)&lt;/math&gt; to it, then save the file. Once again, the prover fails to prove deadlock freeness automatically.
</li><li> At the beginning of the proof, there are no selected hypothesis at all. So we need to select a few. The old deadlock freeness theorem will be useful, AXM7 of <tt>doors_ctx2</tt> too. To begin with, we try to avoid using &lt;math&gt;exit&lt;/math&gt;, as we want to keep things as simple as possible. But since &lt;math&gt;sit&lt;/math&gt; and &lt;math&gt;aut&lt;/math&gt; are inside the theorem, we also are likely to need &lt;math&gt;sit \subseteq aut&lt;/math&gt;, &lt;math&gt;sit \in P \mathbin \rightarrow L&lt;/math&gt; and &lt;math&gt;aut \in P \mathbin \leftrightarrow L&lt;/math&gt;.
</li><li> Once again, the prover automatically rewrites the existential quantifiers in the hypotheses. We now look at the proof. There is an easy case if &lt;math&gt;sit(p) = outside&lt;/math&gt;. Solve it.
</li><li> For the other case, we will need the notion of &lt;math&gt;exit&lt;/math&gt;. The axioms about &lt;math&gt;exit&lt;/math&gt; state that
<ul><li> (AXM 3) Every room except the outside has exactly one exit.
</li><li> (AXM 4) An exit must be a room that communicates with the current one.
</li><li> (AXM 5) A chain of exits leads to the outside without any cycles or infinite paths.
</li><li> (AXM 6) Everyone allowed in a room is allowed to go through its exit.
</li></ul>
</li></ol>
<p>In our proof, we still need to show that anyone who is not outside can walk through a door. For this, AXM 5 is useless, so we add all hypothesis containing &lt;math&gt;exit&lt;/math&gt; except for AXM 5. Now we only need to instantiate &lt;math&gt;q&lt;/math&gt; and &lt;math&gt;m&lt;/math&gt; correctly and concluding the proof should not be too hard. For &lt;math&gt;q&lt;/math&gt;, the choice &lt;math&gt;p&lt;/math&gt; is obvious. But it is not quite as easy for &lt;math&gt;m&lt;/math&gt;. Expressed in language, &lt;math&gt;m&lt;/math&gt; must be the room behind the exit door of the room that &lt;math&gt;p&lt;/math&gt; is currently in. Try translating this into set theory. But do not worry if you get it wrong. You can still go back in the proof by righ-clicking at the desired point in the proof tree and choosing prune.
</p>
</div>
<div class="warning" style="color:red;"><b>Dear reader, some formulas and templates are not yet rendered well, but the problem is being worked out...</b></div>
<div class="navigation">
<p>{{ #if: <a href="customizing_a_perspective_suitable_for_rodin_rodin_tutorial.html" title="Customizing a perspective suitable for RODIN (Rodin Tutorial)">Customizing a perspective suitable for RODIN</a> | Previous:<a href="customizing_a_perspective_suitable_for_rodin_rodin_tutorial.html" title="Customizing a perspective suitable for RODIN (Rodin Tutorial)">Customizing a perspective suitable for RODIN</a> | }} {{ #if: <a href="mathematical_proofs_rodin_tutorial.html" title="Mathematical proofs (Rodin Tutorial)">Mathematical proofs</a> | Next:<a href="mathematical_proofs_rodin_tutorial.html" title="Mathematical proofs (Rodin Tutorial)">Mathematical proofs</a> | }} {{ #if: <a href="index_rodin_tutorial1.html" title="Index (Rodin Tutorial)">Index</a> | Up:<a href="index_rodin_tutorial1.html" title="Index (Rodin Tutorial)">Index</a> | }}
</p>
</div>

<!-- 
NewPP limit report
Preprocessor node count: 53/1000000
Post-expand include size: 1328/2097152 bytes
Template argument size: 808/2097152 bytes
-->

<!-- Saved in parser cache with key mediawiki_eventb:pcache:idhash:81-0!1!0!!en!2 and timestamp 20080808162846 -->
<div class="printfooter">
Retrieved from "<a href="">http://wiki.event-b.org/index.php/Location_Access_Controller_%28Rodin_Tutorial%29</a>"</div>
			<div id="catlinks"><p class="catlinks"><a href="" title="Special:Categories">Categories</a>: <span dir="ltr"><a class="new" href="" title="Category:User Documentation">User Documentation</a></span> | <span dir="ltr"><a class="new" href="" title="Category:Rodin Platform">Rodin Platform</a></span> | <span dir="ltr"><a class="new" href="" title="Category:Tutorial">Tutorial</a></span></p></div>			<!-- end content --><!-- ('div', {'class': 'visualClear'}) ('/div', {}) --></div></div></div>
    <div id="column-one">
      <!-- ('div', {'id': 'p-cactions', 'class': 'portlet'}) ('/div', {}) -->
      <!-- ('div', {'class': 'portlet', 'id': 'p-personal'}) ('/div', {}) -->
      <!-- ('div', {'class': 'portlet', 'id': 'p-logo'}) ('/div', {}) -->
      <div class="portlet" id="p-nav">
  
      </div>
      <!-- ('div', {'id': 'p-search', 'class': 'portlet'}) ('/div', {}) -->
      <!-- ('div', {'class': 'portlet', 'id': 'p-tb'}) ('/div', {}) -->
    </div>
    <!-- end left column -->
  <!-- end of the left (by default at least) column -->
			<!-- ('div', {'class': 'visualClear'}) ('/div', {}) -->
			<div id="footerHacked">
				<ul id="f-list">
				<li id="lastmod"> This page was last modified 16:47, 15 July 2008.</li>
				<li id="viewcount">This page has been accessed 42 times.</li>
				<li id="privacy"><a href="" title="Event-B:Privacy policy">Privacy policy</a></li>
				<li id="about"><a href="" title="Event-B:About">About Event-B</a></li>
				<li id="disclaimer"><a href="" title="Event-B:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
		
	
		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
</div>
<!-- Served in 0.133 secs. --><br /></body></html>
