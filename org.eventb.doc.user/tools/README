= HOWTO generate documentation =

Eclipse help files may be generated either from a set of page and a content
page or from a single page.

== For Manuals Made of Several Pages ==
Those pages are made with ''Navigation'' and ''Topic'' templates on event-b mediawiki. The
topic template is mandatory and is used to elaborate the TOC xml file.

=== Rodin User Manual Example ===
python mw2html.py  -f -r"Rodin_User_Manual" -R'Index \(([^<]*)\) - Event-B' "http://wiki.event-b.org/index.php/Index_(Rodin_User_Manual)" $HOME/workspace/org.eventb.doc.user/html/ 

=== Rodin Tutorial Example ===
python mw2html.py  -f -r"Rodin_Tutorial" -R'Index \(([^<]*)\) - Event-B' "http://wiki.event-b.org/index.php/Index_(Rodin_Tutorial)" $HOME/workspace/org.eventb.doc.user/html/

== For Manuals Made of a Single Pages ==
The --one-page option shall be passed to the script which will infer the
TOC xml file from the <h2> and <h3> html tags.


= HOWTO write documentation =
See example on
http://wiki.event-b.org/index.php?title=Index_(Rodin_User_Manual)&action=edit
or http://wiki.event-b.org/index.php/Index_(Rodin_Tutorial)&action=edit

See also template pages on http://wiki.event-b.org/index.php/Template:Topic and
http://wiki.event-b.org/index.php/Template:Navigation.

= mw2html help =

mw2html url outdir [options]

Converts an entire Mediawiki site into static HTML.
Tested only with Mediawiki 1.4beta6 Monobook output.
WARNING: This is a recursive robot that ignores robots.txt.  Use with care.

  url                  - URL of mediawiki page to convert to static HTML.
  outdir               - Output directory.

  -f, --force          - Overwrite existing files in outdir.
  --no-flatten         - Do not flatten directory structure.
  --no-lower           - Retain original case for output filenames and dirs.
  --no-clean           - Do not clean up filenames (clean replaces
                         non-alphanumeric chars with _, renames math thumbs).
  --no-hack-skin       - Do not modify skin CSS and HTML for looks.
  --no-made-by         - Suppress "generated by" comment in HTML source.
  --no-move-href       - Disable <movehref> tag. [1]
  --no-remove-png      - Retain external link PNG icons.
  --no-remove-history  - Retain image history and links to information.
  --no-images          - Do not fetch images.
  --no-image-dir       - Store image in the same directory tha html.
  --one-page           - Only treat one page
  -l, --left=a.html    - Paste HTML fragment file into left sidebar.
  -t, --top=a.html     - Paste HTML fragment file into top horiz bar.
  -b, --bottom=a.html  - Paste HTML fragment file into footer horiz bar.
  -i, --index=filename - Move given filename in outdir to index.html.
  -r, --title-regex=re - Only follow url matching the regex.
  -R, --title-extract-re
                         - regex used to extract TOC titles from <title> elmt.
                           Default to '([^<]*) - Event-B'
  -v, --verbose        - Show more informations.
  -d, --debug          - Show debugging informations.
  -q, --quiet          - Only show critical errors.

Example Usage:
  mw2html http://127.0.0.1/mywiki/ out -f -i main_page.html -l sidebar.html

  Freezes wiki into 'out' directory, moves main_page.html => index.html,
  assumes sidebar.html is defined in the current directory.

[1]. The <movehref> tag.
     Wiki syntax: <html><movehref href="a"></html>...<html></movehref></html>.
     When enabled, this tag will cause all href= attributes inside of it to be
     set to the given location.  This is useful for linking images.
     In MediaWiki, for the <html> tag to work, one needs to enable $wgRawHtml
     and $wgWhitelistEdit in LocalSettings.php.  A <movehref> tag with no href
     field will remove all links inside it.


